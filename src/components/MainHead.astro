---
import '../styles/global.css'
import '../styles/variables.css'
import '../styles/typography.css'

interface Props {
  title?: string
  description?: string
  canonicalUrl?: string
  ogImage?: string
  ogType?: string
  twitterCard?: string
  noindex?: boolean
  structuredData?: object
}

const {
  title = 'Soham Sarkar - Digital Gardener & Full-Stack Developer',
  description = 'I craft impactful software experiences with code. Full-stack developer specializing in React, TypeScript, Go, and modern web technologies. Based in Bangalore, working worldwide.',
  canonicalUrl = new URL(Astro.url.pathname, Astro.site).href,
  ogImage = '/og-image.jpg',
  ogType = 'website',
  twitterCard = 'summary_large_image',
  noindex = false,
  structuredData,
} = Astro.props as Props

// Generate absolute URLs for Open Graph
const absoluteOgImage = new URL(ogImage, Astro.site).href
---

<!-- Essential Meta Tags -->
<meta charset='UTF-8' />
<meta name='viewport' content='width=device-width, initial-scale=1.0' />
<meta name='generator' content={Astro.generator} />

<!-- SEO Meta Tags -->
<title>{title}</title>
<meta name='description' content={description} />
<link rel='canonical' href={canonicalUrl} />
{noindex && <meta name='robots' content='noindex, nofollow' />}

<!-- Open Graph / Facebook -->
<meta property='og:type' content={ogType} />
<meta property='og:url' content={canonicalUrl} />
<meta property='og:title' content={title} />
<meta property='og:description' content={description} />
<meta property='og:image' content={absoluteOgImage} />
<meta property='og:image:width' content='1200' />
<meta property='og:image:height' content='630' />
<meta property='og:site_name' content='Soham Sarkar' />
<meta property='og:locale' content='en_US' />

<!-- Twitter Card -->
<meta name='twitter:card' content={twitterCard} />
<meta name='twitter:url' content={canonicalUrl} />
<meta name='twitter:title' content={title} />
<meta name='twitter:description' content={description} />
<meta name='twitter:image' content={absoluteOgImage} />
<meta name='twitter:creator' content='@sohamsarkartech' />
<meta name='twitter:site' content='@sohamsarkartech' />

<!-- Additional SEO Meta Tags -->
<meta name='author' content='Soham Sarkar' />
<meta name='language' content='en' />
<meta name='theme-color' content='#000000' />
<meta name='msapplication-TileColor' content='#000000' />

<!-- Favicon and Icons -->
<link rel='icon' type='image/svg+xml' href='/favicon.ico' />
<link rel='apple-touch-icon' sizes='180x180' href='/favicon/apple-touch-icon.png' />
<link rel='icon' type='image/png' sizes='32x32' href='/favicon/favicon-32x32.png' />
<link rel='icon' type='image/png' sizes='16x16' href='/favicon/favicon-16x16.png' />
<link rel='manifest' href='/favicon/site.webmanifest' />

<!-- Structured Data -->
{structuredData && <script type='application/ld+json' set:html={JSON.stringify(structuredData)} />}

<!-- Preconnect to External Domains -->
<link rel='preconnect' href='https://www.googletagmanager.com' />
<link rel='dns-prefetch' href='https://cal.com' />

<!-- Google Tag Manager -->
<script is:inline>
  ;(function (w, d, s, l, i) {
    w[l] = w[l] || []
    w[l].push({'gtm.start': new Date().getTime(), event: 'gtm.js'})
    var f = d.getElementsByTagName(s)[0],
      j = d.createElement(s),
      dl = l != 'dataLayer' ? '&l=' + l : ''
    j.async = true
    j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl
    f.parentNode.insertBefore(j, f)
  })(window, document, 'script', 'dataLayer', 'GTM-WCR6CCD9')
</script>
<!-- End Google Tag Manager -->

<!-- Plausible Analytics -->
<script defer data-domain='sohamsarkar.com' src='https://plausible.io/js/script.js'></script>
